*** 1- Introduction ***
---

## Deploying Node Applications

### Overview

There are two primary options for deploying Node applications:

1. Using a Platform-as-a-Service (PaaS) provider
2. Using Docker

---

## 1. Platform-as-a-Service (PaaS)

### Definition

A PaaS provider handles most of the infrastructure tasks for you.

### When to Use

Choose a PaaS if you do not want to manage:

* Servers
* Load balancers
* Reverse proxies
* Application restarts after crashes

### Common Providers

* Heroku
* Google Cloud Platform
* AWS
* Azure

Different developers prefer different providers, but Heroku is used in this course because:

* It is easy to start with
* It has strong documentation
* It provides a comprehensive set of features

### Summary

Use a PaaS if you prefer simplicity and do not want to deal with infrastructure details.

---

## 2. Docker Deployment

### Definition

Docker allows you to package your application into an image.

### When to Use

Use Docker if you:

* Want full control over your deployment
* Want to deploy to your own web servers
* Need consistent environments across machines

### How It Works

You build a Docker image of your application and deploy that image to any server you choose.

---

## Focus of This Section

This section focuses on deploying Node applications to **Heroku**.

---

*** 2- Preparing the App for Production ***
---

## Preparing a Node Application for Production

### Purpose

Before deploying the application, certain production-ready middleware should be added to improve security and performance.

---

## Required Production Packages

### 1. Helmet

* Installed using: `npm install helmet`
* Purpose: Provides security by protecting the application from well-known web vulnerabilities.
* Previously introduced in the "Express Advanced Topics" section.

### 2. Compression

* Installed using: `npm install compression`
* Purpose: Compresses HTTP responses to reduce bandwidth and improve performance.

---

## Creating the Production Startup Module

### File Setup

* Create a new file: `startup/prod.js`
* This file will contain all middleware used specifically for the production environment.

### Module Implementation

Steps inside `prod.js`:

1. Import the required packages:

   -------------------code----------------------
   const helmet = require('helmet');
   const compression = require('compression');
   -------------------code----------------------

2. Export a function that takes the Express `app` object:

   -------------------code----------------------
   module.exports = function(app) {
       app.use(helmet());
       app.use(compression());
   };
   -------------------code----------------------

3. Both `helmet` and `compression` are functions, so they must be called before passing to `app.use`.

---

## Registering the Production Module

### Modifying `index.js`

* Import the production startup module:
* Call the function and pass in the Express application object:

  -------------------code----------------------
  require("./startup/prod")(app);
  -------------------code----------------------

### Conditional Loading (Optional)

* It is possible to load this module only when `NODE_ENV` is set to `production`, but for this course it is not essential.

---

## Summary

* Installed security and performance-related middleware.
* Organized production-specific configuration inside `startup/prod.js`.
* Registered the production middleware in the main entry module.
* The application is now prepared for deployment.

Next, the lecture moves on to deployment using Heroku.


*** 3- Getting Started with Heroku ***
---

## Deploying the Vidly Application to Heroku

### Overview

To deploy a Node application to Heroku, you must complete two initial setup steps:

1. Create a Heroku account
2. Install the Heroku CLI

---

## 1. Creating a Heroku Account

* Go to the Heroku website.
* Registration is simple, free, and takes only a few seconds.

---

## 2. Installing the Heroku CLI

### How to Install

* Search for "Heroku CLI" in your browser.
* Open the first link.
* Download the installer for your operating system.

### Example Installation Methods

* macOS: Can install easily using Homebrew.
* Windows and Linux: Use the platform-specific installer provided on the site.

---

## 3. Verifying Installation

After installation, open the terminal and run:

-------------------code----------------------
heroku -v
-------------------code----------------------

* This prints the installed CLI version.
* Even if an update is available, the commands shown in the lecture work with different versions.

---

## 4. Logging into Heroku

Use the following command:

-------------------code----------------------
heroku login
-------------------code----------------------

* Enter the email and password used for your Heroku account.
* Successful login will display a confirmation message.

---

## 5. Handling Login Issues (Proxy Settings)

If login fails due to a firewall or proxy:

### Set the Proxy Environment Variable

For macOS or Linux:

-------------------code----------------------
export HTTP_PROXY=http://proxy.server.com:port
-------------------code----------------------

For Windows:

-------------------code----------------------
set HTTP_PROXY=http://proxy.server.com:port
-------------------code----------------------

After setting the proxy variable, run `heroku login` again.

---

## Summary

* Create a Heroku account.
* Install and verify the Heroku CLI.
* Log in using your Heroku credentials.
* If behind a firewall, configure proxy settings.
* After these steps, the application will be ready for deployment preparation.

Next steps involve preparing the Vidly application for deployment to Heroku.
