*** 1- Introduction ***
---

## Deploying Node Applications

### Overview

There are two primary options for deploying Node applications:

1. Using a Platform-as-a-Service (PaaS) provider
2. Using Docker

---

## 1. Platform-as-a-Service (PaaS)

### Definition

A PaaS provider handles most of the infrastructure tasks for you.

### When to Use

Choose a PaaS if you do not want to manage:

* Servers
* Load balancers
* Reverse proxies
* Application restarts after crashes

### Common Providers

* Heroku
* Google Cloud Platform
* AWS
* Azure

Different developers prefer different providers, but Heroku is used in this course because:

* It is easy to start with
* It has strong documentation
* It provides a comprehensive set of features

### Summary

Use a PaaS if you prefer simplicity and do not want to deal with infrastructure details.

---

## 2. Docker Deployment

### Definition

Docker allows you to package your application into an image.

### When to Use

Use Docker if you:

* Want full control over your deployment
* Want to deploy to your own web servers
* Need consistent environments across machines

### How It Works

You build a Docker image of your application and deploy that image to any server you choose.

---

## Focus of This Section

This section focuses on deploying Node applications to **Heroku**.

---

*** 2- Preparing the App for Production ***
---

## Preparing a Node Application for Production

### Purpose

Before deploying the application, certain production-ready middleware should be added to improve security and performance.

---

## Required Production Packages

### 1. Helmet

* Installed using: `npm install helmet`
* Purpose: Provides security by protecting the application from well-known web vulnerabilities.
* Previously introduced in the "Express Advanced Topics" section.

### 2. Compression

* Installed using: `npm install compression`
* Purpose: Compresses HTTP responses to reduce bandwidth and improve performance.

---

## Creating the Production Startup Module

### File Setup

* Create a new file: `startup/prod.js`
* This file will contain all middleware used specifically for the production environment.

### Module Implementation

Steps inside `prod.js`:

1. Import the required packages:

   -------------------code----------------------
   const helmet = require('helmet');
   const compression = require('compression');
   -------------------code----------------------

2. Export a function that takes the Express `app` object:

   -------------------code----------------------
   module.exports = function(app) {
       app.use(helmet());
       app.use(compression());
   };
   -------------------code----------------------

3. Both `helmet` and `compression` are functions, so they must be called before passing to `app.use`.

---

## Registering the Production Module

### Modifying `index.js`

* Import the production startup module:
* Call the function and pass in the Express application object:

  -------------------code----------------------
  require("./startup/prod")(app);
  -------------------code----------------------

### Conditional Loading (Optional)

* It is possible to load this module only when `NODE_ENV` is set to `production`, but for this course it is not essential.

---

## Summary

* Installed security and performance-related middleware.
* Organized production-specific configuration inside `startup/prod.js`.
* Registered the production middleware in the main entry module.
* The application is now prepared for deployment.

Next, the lecture moves on to deployment using Heroku.
